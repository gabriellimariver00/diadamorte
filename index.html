<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Descubra o Dia da Sua Morte</title>
  <style>
    /* Reset b√°sico */
    * {
      box-sizing: border-box;
    }
    body, html {
      margin: 0; padding: 0; height: 100%;
      background: black url('https://img.freepik.com/fotos-premium/arvore-preta-seca-sem-folhas-com-ceu-vermelho-sangue-assustador-fundo-de-natureza-de-arvore-de-horror-assustador-para-o-halloween_696486-50.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Georgia', serif;
      color: white;
      overflow-x: hidden;
      user-select: none;
    }

    #ad-space {
      width: 100%;
      background: rgba(30, 0, 0, 0.85);
      padding: 8px 0;
      text-align: center;
      font-size: 1.1rem;
      color: #f44242;
      font-weight: 700;
      box-shadow: inset 0 0 10px #b80000;
      user-select: none;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1000;
    }

    #container {
      max-width: 480px;
      margin: 80px auto 60px auto;
      background: rgba(0,0,0,0.85);
      padding: 30px 30px 50px 30px;
      border-radius: 14px;
      box-shadow: 0 0 30px crimson;
      position: relative;
    }

    h1 {
      font-size: 2.8rem;
      text-align: center;
      margin-bottom: 25px;
      text-shadow: 0 0 12px crimson;
    }

    #intro-screen, #questions, #result {
      user-select: none;
    }

    #intro-screen {
      text-align: center;
    }
    #intro-screen p {
      font-size: 1.4rem;
      margin-bottom: 40px;
      line-height: 1.5;
    }
    #start-btn {
      background: crimson;
      border: none;
      padding: 22px 0;
      width: 100%;
      font-size: 1.8rem;
      font-weight: 900;
      border-radius: 14px;
      color: white;
      cursor: pointer;
      box-shadow: 0 0 18px crimson;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #start-btn:hover {
      background-color: #b30000;
    }

    .question {
      display: none;
      animation: fadeIn 0.4s ease forwards;
    }
    .question.active {
      display: block;
    }
    .question p {
      font-size: 1.3rem;
      margin-bottom: 20px;
    }

    .options {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .options button {
      flex: 1;
      margin: 0 8px;
      padding: 16px 0;
      background: #330000;
      border: 2px solid crimson;
      border-radius: 11px;
      color: white;
      font-weight: 700;
      font-size: 1.2rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    .options button:hover {
      background-color: crimson;
    }

    input[type="text"], input[type="date"] {
      width: 100%;
      padding: 16px 14px;
      font-size: 1.2rem;
      border-radius: 11px;
      border: 2px solid crimson;
      background: black;
      color: white;
      box-shadow: 0 0 10px crimson;
      user-select: text;
    }
    input::placeholder {
      color: #bbb;
    }
    input[type="date"]::-webkit-inner-spin-button,
    input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(1);
      cursor: pointer;
    }

    #next-btn {
      background: crimson;
      border: none;
      width: 100%;
      padding: 20px 0;
      font-weight: 900;
      font-size: 1.6rem;
      color: white;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: 0 0 20px crimson;
      user-select: none;
      margin-top: 12px;
      transition: background-color 0.3s ease;
      display: none;
    }
    #next-btn:hover {
      background-color: #b30000;
    }

    #result {
      text-align: center;
      display: none;
      user-select: none;
    }
    #result img {
      max-width: 140px;
      margin-bottom: 22px;
      filter: drop-shadow(0 0 9px crimson);
    }
    #result h2 {
      font-size: 2.2rem;
      margin-bottom: 18px;
      text-shadow: 0 0 12px crimson;
    }
    #result p {
      font-size: 1.3rem;
      line-height: 1.4;
      margin: 0 12px 30px 12px;
    }

    #sound-control {
      position: fixed;
      top: 12px;
      right: 12px;
      background: rgba(220,20,60,0.9);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 28px;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 15px crimson;
      z-index: 9999;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #sound-control:hover {
      background-color: crimson;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
  </style>
</head>

<body>

  <!-- Espa√ßo para an√∫ncios -->
  <div id="ad-space">
    Espa√ßo reservado para an√∫ncios
  </div>

  <button id="sound-control" title="Ativar / Desativar som">üîà</button>

  <div id="container">

    <!-- Tela inicial -->
    <div id="intro-screen">
      <h1>Descubra o Dia da Sua Morte</h1>
      <p>Ser√° que voc√™ sabe quando vai morrer? Responda algumas perguntas simples e descubra seu destino.</p>
      <button id="start-btn">Come√ßar</button>
    </div>

    <!-- Perguntas -->
    <div id="questions" style="display:none;">

      <div class="question" data-step="1">
        <p>Voc√™ fuma?</p>
        <div class="options">
          <button data-value="sim">Sim</button>
          <button data-value="√†s vezes">√Äs vezes</button>
          <button data-value="n√£o">N√£o</button>
        </div>
      </div>

      <div class="question" data-step="2" style="display:none;">
        <p>Qual o seu nome?</p>
        <input type="text" id="name" placeholder="Digite seu nome aqui" autocomplete="off" />
      </div>

      <div class="question" data-step="3" style="display:none;">
        <p>Qual a sua data de nascimento?</p>
        <input type="date" id="birthdate" max="" />
      </div>

      <button id="next-btn">Pr√≥ximo</button>
    </div>

    <!-- Resultado -->
    <div id="result" style="display:none;">
      <img src="https://segredosdomundo.r7.com/wp-content/uploads/2021/12/10-anjos-da-morte-mais-conhecidos-na-biblia-e-na-mitologia-e1639504697683.jpg" alt="Anjo da Morte" />
      <h2 id="result-text"></h2>
      <p id="result-details"></p>
    </div>

  </div>

  <!-- √Åudio ambiente -->
  <audio id="background-audio" loop preload="auto" volume="0.1">
    <source src="https://drive.google.com/uc?export=download&id=1FYKXRaObgcDAnW6UcmHiVSQGcFWmvymS" type="audio/mpeg" />
    Seu navegador n√£o suporta √°udio embutido.
  </audio>

  <script>
    const startBtn = document.getElementById('start-btn');
    const introScreen = document.getElementById('intro-screen');
    const questionsDiv = document.getElementById('questions');
    const nextBtn = document.getElementById('next-btn');
    const resultSection = document.getElementById('result');
    const resultText = document.getElementById('result-text');
    const resultDetails = document.getElementById('result-details');
    const nameInput = document.getElementById('name');
    const birthdateInput = document.getElementById('birthdate');
    const soundControl = document.getElementById('sound-control');
    const audio = document.getElementById('background-audio');

    // Limita data de nascimento pra hoje
    birthdateInput.max = new Date().toISOString().split('T')[0];

    // Perguntas
    const questions = [
      { type: 'option', element: document.querySelector('[data-step="1"]') },
      { type: 'input', element: document.querySelector('[data-step="2"]') },
      { type: 'input', element: document.querySelector('[data-step="3"]') },
    ];

    let currentStep = 0;
    let answers = {};

    // Som inicia desligado (clique para ativar)
    audio.volume = 0.07;
    audio.pause();

    soundControl.addEventListener('click', () => {
      if(audio.paused) {
        audio.play();
        soundControl.textContent = "üîä";
      } else {
        audio.pause();
        soundControl.textContent = "üîà";
      }
    });

    startBtn.addEventListener('click', () => {
      introScreen.style.display = 'none';
      questionsDiv.style.display = 'block';
      showStep(currentStep);
      nextBtn.style.display = 'none';
    });

    // Fun√ß√£o para mostrar a pergunta atual
    function showStep(step) {
      questions.forEach((q, idx) => {
        if(idx === step) {
          q.element.style.display = 'block';
          q.element.classList.add('active');
          if(q.type === 'option') {
            nextBtn.style.display = 'none';
            // Reset sele√ß√£o para o bot√£o do step 1
            Array.from(q.element.querySelectorAll('button')).forEach(b => b.classList.remove('selected'));
          } else {
            nextBtn.style.display = 'block';
            if(step === questions.length - 1) {
              nextBtn.textContent = "Descubra o dia da sua morte";
            } else {
              nextBtn.textContent = "Pr√≥ximo";
            }
          }
        } else {
          q.element.style.display = 'none';
          q.element.classList.remove('active');
        }
      });
    }

    // Evento para selecionar resposta do tipo op√ß√£o
    questions[0].element.querySelectorAll('button').forEach(button => {
      button.addEventListener('click', () => {
        questions[0].element.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
        button.classList.add('selected');
        answers['fuma'] = button.getAttribute('data-value');
        nextBtn.style.display = 'block';
      });
    });

    nextBtn.addEventListener('click', () => {
      if(currentStep === 0) {
        if(!answers['fuma']) {
          alert('Por favor, responda se voc√™ fuma.');
          return;
        }
        currentStep++;
        showStep(currentStep);
      } else if(currentStep === 1) {
        let val = nameInput.value.trim();
        if(val.length < 2) {
          alert('Por favor, digite um nome v√°lido.');
          return;
        }
        answers['nome'] = val;
        currentStep++;
        showStep(currentStep);
      } else if(currentStep === 2) {
        let val = birthdateInput.value;
        if(!val) {
          alert('Por favor, insira sua data de nascimento.');
          return;
        }
        answers['nascimento'] = val;
        showResult();
      }
    });

    // Armazena nomes j√° usados no localStorage
    function hasUsedName(name) {
      let used = localStorage.getItem('usedNames');
      if(!used) return false;
      let arr = JSON.parse(used);
      return arr.includes(name.toLowerCase());
    }
    function addUsedName(name) {
      let used = localStorage.getItem('usedNames');
      let arr = used ? JSON.parse(used) : [];
      arr.push(name.toLowerCase());
      localStorage.setItem('usedNames', JSON.stringify(arr));
    }

    function showResult() {
      if(hasUsedName(answers['nome'])) {
        alert('Voc√™ j√° consultou com esse nome. Por favor, use outro nome para consultar novamente.');
        currentStep = 1;
        showStep(currentStep);
        return;
      }
      addUsedName(answers['nome']);

      const birthYear = new Date(answers['nascimento']).getFullYear();
      const todayYear = new Date().getFullYear();
      const age = todayYear - birthYear;

      // Definir causa e idade da morte
      let cause = 'causas naturais';
      if(answers['fuma'] === 'sim') cause = 'problemas respirat√≥rios relacionados ao tabagismo';
      else if(answers['fuma'] === '√†s vezes') cause = 'complica√ß√µes ocasionais por tabagismo';
      
      let deathAge = Math.floor(Math.random() * 31) + 60;
      if(answers['fuma'] === 'sim') deathAge -= 8;
      if(answers['fuma'] === '√†s vezes') deathAge -= 4;
      if(deathAge < age + 1) deathAge = age + 1;

      const deathYear = birthYear + deathAge;

      const cities = ['Jaguaribe', 'Jaguaribara', 'Limoeiro', 'Itai√ßaba', 'Aracati', 'Morada Nova'];
      const city = cities[Math.floor(Math.random() * cities.length)];

      // Data aleat√≥ria da morte
      function deathDay(year) {
        const start = new Date(year, 0, 1);
        const end = new Date(year, 11, 31);
        const diff = end.getTime() - start.getTime();
        const newDate = new Date(start.getTime() + Math.random() * diff);
        return newDate.toLocaleDateString('pt-BR');
      }

      const deathDate = deathDay(deathYear);
      const deathHour = Math.floor(Math.random() * 24);
      const deathMinute = Math.floor(Math.random() * 60);

      // Mostrar resultado
      resultText.textContent = `${answers['nome']}, seu fim acontecer√° exatamente assim:`;
      resultDetails.innerHTML = `
        Voc√™ morrer√° aos <strong>${deathAge}</strong> anos, no ano de <strong>${deathYear}</strong>.<br/>
        A causa prov√°vel da morte ser√° <strong>${cause}</strong>.<br/>
        A data exata ser√° <strong>${deathDate}</strong> √†s <strong>${deathHour.toString().padStart(2,'0')}:${deathMinute.toString().padStart(2,'0')}</strong>.<br/>
        Local da morte: <strong>${city}</strong>.
      `;

      questionsDiv.style.display = 'none';
      resultSection.style.display = 'block';
    }
  </script>

</body>
</html>

