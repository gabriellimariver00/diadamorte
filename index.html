<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Descubra o Dia da Sua Morte</title>

  <style>
    /* Reset b√°sico */
    * {
      box-sizing: border-box;
    }
    body, html {
      margin: 0; padding: 0; height: 100%;
      background: black url('https://img.freepik.com/fotos-premium/arvore-preta-seca-sem-folhas-com-ceu-vermelho-sangue-assustador-fundo-de-natureza-de-arvore-de-horror-assustador-para-o-halloween_696486-50.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Georgia', serif;
      color: white;
      overflow-x: hidden;
    }

    #container {
      max-width: 480px;
      margin: 50px auto 60px auto;
      background: rgba(0,0,0,0.8);
      padding: 25px 30px;
      border-radius: 12px;
      box-shadow: 0 0 25px crimson;
      position: relative;
    }

    h1 {
      font-size: 2.4rem;
      text-align: center;
      margin-bottom: 25px;
      text-shadow: 0 0 8px crimson;
      user-select: none;
    }

    .question {
      display: none;
      animation: fadeIn 0.5s ease forwards;
    }
    .question.active {
      display: block;
    }
    .question p {
      font-size: 1.3rem;
      margin-bottom: 15px;
      user-select: none;
    }

    .options {
      display: flex;
      justify-content: space-between;
    }
    .options button {
      flex: 1;
      margin: 0 7px;
      padding: 14px 0;
      background: #220000;
      border: 2px solid crimson;
      border-radius: 9px;
      color: white;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .options button:hover {
      background-color: crimson;
    }

    input[type="text"], input[type="date"] {
      width: 100%;
      padding: 14px 12px;
      font-size: 1.1rem;
      border-radius: 8px;
      border: 2px solid crimson;
      background: black;
      color: white;
      user-select: text;
      box-shadow: 0 0 5px crimson;
    }
    input::placeholder {
      color: #bbb;
    }
    input[type="date"]::-webkit-inner-spin-button,
    input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(1);
      cursor: pointer;
    }

    #next-btn {
      margin-top: 24px;
      background: crimson;
      border: none;
      width: 100%;
      padding: 16px 0;
      font-weight: 900;
      font-size: 1.35rem;
      color: white;
      border-radius: 10px;
      cursor: pointer;
      display: none;
      user-select: none;
      box-shadow: 0 0 15px crimson;
      transition: background-color 0.3s ease;
    }
    #next-btn:hover {
      background-color: #cc0011;
    }

    #result {
      display: none;
      text-align: center;
      user-select: none;
    }
    #result img {
      max-width: 140px;
      margin-bottom: 15px;
      filter: drop-shadow(0 0 7px crimson);
    }
    #result h2 {
      font-size: 2rem;
      margin-bottom: 14px;
      text-shadow: 0 0 8px crimson;
    }
    #result p {
      font-size: 1.2rem;
      line-height: 1.4;
      margin: 0 10px 25px 10px;
    }

    #sound-control {
      position: fixed;
      top: 15px;
      right: 15px;
      background: rgba(220,20,60,0.9);
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      font-size: 25px;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 12px crimson;
      z-index: 999;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #sound-control:hover {
      background-color: crimson;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
  </style>
</head>

<body>

<button id="sound-control" title="Ativar / Desativar som">üîà</button>

<div id="container">
  <h1>Descubra o Dia da Sua Morte</h1>

  <div id="questions">

    <div class="question active" data-step="1">
      <p>Voc√™ fuma?</p>
      <div class="options">
        <button data-value="sim">Sim</button>
        <button data-value="√†s vezes">√Äs vezes</button>
        <button data-value="n√£o">N√£o</button>
      </div>
    </div>

    <div class="question" data-step="2">
      <p>Voc√™ tem press√£o alta?</p>
      <div class="options">
        <button data-value="sim">Sim</button>
        <button data-value="√†s vezes">√Äs vezes</button>
        <button data-value="n√£o">N√£o</button>
      </div>
    </div>

    <div class="question" data-step="3">
      <p>Voc√™ tem diabetes?</p>
      <div class="options">
        <button data-value="sim">Sim</button>
        <button data-value="√†s vezes">√Äs vezes</button>
        <button data-value="n√£o">N√£o</button>
      </div>
    </div>

    <div class="question" data-step="4">
      <p>Voc√™ pratica exerc√≠cios regularmente?</p>
      <div class="options">
        <button data-value="sim">Sim</button>
        <button data-value="√†s vezes">√Äs vezes</button>
        <button data-value="n√£o">N√£o</button>
      </div>
    </div>

    <div class="question" data-step="5">
      <p>Voc√™ j√° teve algum problema card√≠aco?</p>
      <div class="options">
        <button data-value="sim">Sim</button>
        <button data-value="n√£o">N√£o</button>
      </div>
    </div>

    <div class="question" data-step="6">
      <p>Qual o seu nome?</p>
      <input type="text" id="name" placeholder="Digite seu nome aqui" autocomplete="off" />
    </div>

    <div class="question" data-step="7">
      <p>Qual a sua data de nascimento?</p>
      <input type="date" id="birthdate" max="" />
    </div>

  </div>

  <button id="next-btn" style="display:none;">Descubra o dia da sua morte</button>

  <div id="result">
    <img src="https://segredosdomundo.r7.com/wp-content/uploads/2021/12/10-anjos-da-morte-mais-conhecidos-na-biblia-e-na-mitologia-e1639504697683.jpg" alt="Anjo da Morte" />
    <h2 id="result-text"></h2>
    <p id="result-details"></p>
  </div>
</div>

<audio id="background-audio" loop preload="auto" volume="0.1">
  <source src="https://drive.google.com/uc?export=download&id=1FYKXRaObgcDAnW6UcmHiVSQGcFWmvymS" type="audio/mpeg" />
  Seu navegador n√£o suporta √°udio embutido.
</audio>

<script>
  // Elementos
  const questions = document.querySelectorAll('.question');
  const nextBtn = document.getElementById('next-btn');
  const resultSection = document.getElementById('result');
  const resultText = document.getElementById('result-text');
  const resultDetails = document.getElementById('result-details');
  const nameInput = document.getElementById('name');
  const birthdateInput = document.getElementById('birthdate');
  const soundControl = document.getElementById('sound-control');
  const audio = document.getElementById('background-audio');

  // Ajusta max da data pra hoje
  birthdateInput.max = new Date().toISOString().split('T')[0];

  let answers = {};
  let currentStep = 1;

  // Inicializa som pausado e volume baixo
  audio.volume = 0.1;
  audio.pause();

  // Bot√£o de som ligar/desligar
  soundControl.addEventListener('click', () => {
    if (audio.paused) {
      audio.play();
      soundControl.textContent = 'üîä';
    } else {
      audio.pause();
      soundControl.textContent = 'üîà';
    }
  });

  // Mostra a pergunta correta e esconde as outras
  function showStep(step) {
    questions.forEach(q => {
      if (parseInt(q.dataset.step) === step) {
        q.classList.add('active');
      } else {
        q.classList.remove('active');
      }
    });
    // Mostra bot√£o s√≥ na √∫ltima pergunta
    nextBtn.style.display = (step === questions.length) ? 'block' : 'none';
  }

  // Inicia mostrando a 1a pergunta
  showStep(currentStep);

  // Ao clicar nas op√ß√µes
  questions.forEach(q => {
    const buttons = q.querySelectorAll('button');
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const step = parseInt(q.dataset.step);
        answers[step] = btn.dataset.value;
        currentStep++;
        if (currentStep > questions.length) currentStep = questions.length;
        showStep(currentStep);
      });
    });
  });

  // Mostra bot√£o "Descubra" s√≥ nas perguntas com inputs (nome e data)
  // Al√©m disso, ativa bot√£o somente quando input tiver valor
  nameInput.addEventListener('input', () => {
    checkInputsForNextBtn();
  });
  birthdateInput.addEventListener('input', () => {
    checkInputsForNextBtn();
  });

  function checkInputsForNextBtn() {
    if(currentStep === questions.length && nameInput.value.trim() !== '' && birthdateInput.value !== '') {
      nextBtn.disabled = false;
      nextBtn.style.opacity = '1';
    } else {
      nextBtn.disabled = true;
      nextBtn.style.opacity = '0.6';
    }
  }

  // Inicialmente bot√£o desativado
  nextBtn.disabled = true;
  nextBtn.style.opacity = '0.6';

  // Bot√£o final: calcular e mostrar resultado
  nextBtn.addEventListener('click', () => {
    const nameVal = nameInput.value.trim();
    const birthVal = birthdateInput.value;

    if (!nameVal) {
      alert('Por favor, digite seu nome.');
      return;
    }
    if (!birthVal) {
      alert('Por favor, selecione sua data de nascimento.');
      return;
    }

    // Verifica nome usado
    if(localStorage.getItem('nomeUsado_' + nameVal.toLowerCase())) {
      alert('Voc√™ j√° consultou com esse nome. Use outro nome para consultar novamente.');
      return;
    }
    localStorage.setItem('nomeUsado_' + nameVal.toLowerCase(), 'true');

    // Calcula idade atual
    const birthYear = parseInt(birthVal.split('-')[0]);
    const ageNow = new Date().getFullYear() - birthYear;

    // Defini causas simples baseadas nas respostas
    let cause = 'parada card√≠aca inesperada';
    if(answers['1'] === 'sim' || answers['2'] === 'sim') cause = 'problemas relacionados ao tabagismo ou press√£o alta';
    else if(answers['3'] === 'sim') cause = 'complica√ß√µes por diabetes';
    else if(answers['5'] === 'sim') cause = 'problemas card√≠acos cr√¥nicos';
    else if(answers['4'] === 'n√£o') cause = 'falta de atividade f√≠sica regular';

    // Calcula idade da morte (aleat√≥rio 60-90, ajustado)
    let deathAge = Math.floor(Math.random() * 31) + 60;
    if(answers['1'] === 'sim') deathAge -= 10;
    if(answers['2'] === 'sim') deathAge -= 5;
    if(answers['3'] === 'sim') deathAge -= 7;
    if(answers['5'] === 'sim') deathAge -= 10;
    if(answers['4'] === 'sim') deathAge += 5;
    if(deathAge < ageNow + 1) deathAge = ageNow + 1;

    const deathYear = birthYear + deathAge;

    // Cidades poss√≠veis
    const cities = ['Jaguaribe', 'Jaguaribara', 'Limoeiro', 'Itai√ßaba', 'Aracati', 'Morada Nova'];
    const city = cities[Math.floor(Math.random() * cities.length)];

    // Hora aleat√≥ria
    const deathHour = Math.floor(Math.random() * 24);
    const deathMinute = Math.floor(Math.random() * 60);

    // Monta resultado
    resultText.textContent = `${nameVal}, seu fim acontecer√° exatamente assim:`;
    resultDetails.innerHTML = `
      Voc√™ morrer√° aos <strong>${deathAge}</strong> anos, no ano de <strong>${deathYear}</strong>.<br/>
      A causa prov√°vel da morte ser√° <strong>${cause}</strong>.<br/>
      A data exata ser√° <strong>${deathDay(deathYear)}</strong> √†s <strong>${pad(deathHour)}:${pad(deathMinute)}</strong>.<br/>
      Local da morte: <strong>${city}</strong>.
    `;

    // Esconde perguntas, mostra resultado
    document.getElementById('questions').style.display = 'none';
    nextBtn.style.display = 'none';
    resultSection.style.display = 'block';
  });

  // Fun√ß√£o para gerar data aleat√≥ria no ano da morte
  function deathDay(year) {
    const start = new Date(year, 0, 1);
    const end = new Date(year, 11, 31);
    const diff = end.getTime() - start.getTime();
    const newDate = new Date(start.getTime() + Math.random() * diff);
    return newDate.toLocaleDateString('pt-BR');
  }
  // Para formatar n√∫mero com zero √† esquerda
  function pad(n) {
    return n < 10 ? '0' + n : n;
  }
</script>

</body>
</html>

