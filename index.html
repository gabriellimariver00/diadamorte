<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no" />
<title>Descubra o Dia da Sua Morte</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Unbounded:wght@700&family=Playfair+Display&display=swap');
  /* Reset básico */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body, html {
    height: 100%;
    background: #000 url('https://i.imgur.com/Zb6U87y.png') no-repeat center center fixed;
    background-size: cover;
    color: #eee;
    font-family: 'Playfair Display', serif;
    overflow-x: hidden;
  }
  /* Overlay preto com transparência para escurecer */
  body::before {
    content: "";
    position: fixed;
    top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    z-index: 0;
  }
  #app {
    position: relative;
    z-index: 10;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .fade-slide {
    animation: fadeSlideIn 0.6s ease forwards;
  }
  @keyframes fadeSlideIn {
    from {opacity:0; transform: translateX(50px);}
    to {opacity:1; transform: translateX(0);}
  }
  .screen {
    width: 100%;
    max-width: 480px;
    background: rgba(20,20,20,0.75);
    border-radius: 15px;
    padding: 25px 30px 40px 30px;
    box-shadow: 0 0 15px 3px rgba(0,0,0,0.8);
    user-select: none;
  }
  h1, h2 {
    font-family: 'Unbounded', cursive;
    margin-bottom: 25px;
    text-align: center;
    color: #f0f0f0;
    text-shadow: 0 0 12px #880000;
  }
  p {
    margin-bottom: 15px;
    font-size: 1.1rem;
    line-height: 1.5;
  }
  .question-text {
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 20px;
    text-align: center;
    text-shadow: 0 0 10px #cc0000;
  }
  .btn-group {
    display: flex;
    justify-content: space-between;
  }
  button {
    background: linear-gradient(135deg, #7a0000, #b30000);
    border: none;
    padding: 14px 22px;
    border-radius: 12px;
    color: #f8f8f8;
    font-weight: 700;
    font-family: 'Unbounded', cursive;
    font-size: 1.1rem;
    cursor: pointer;
    flex-basis: 30%;
    box-shadow: 0 0 8px #aa0000;
    transition: background 0.3s ease;
  }
  button:hover {
    background: linear-gradient(135deg, #b30000, #7a0000);
  }
  input[type="text"], input[type="date"] {
    width: 100%;
    padding: 14px 15px;
    font-size: 1.1rem;
    font-family: 'Playfair Display', serif;
    border-radius: 10px;
    border: none;
    margin-bottom: 25px;
    box-shadow: inset 0 0 6px #660000;
    background: rgba(40, 0, 0, 0.8);
    color: #f0f0f0;
    text-align: center;
  }
  input[type="date"]::-webkit-inner-spin-button,
  input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
  }
  /* Imagem da morte no topo e resultado */
  #grim-reaper {
    width: 110px;
    margin: 0 auto 30px auto;
    display: block;
    filter: drop-shadow(0 0 10px #bb0000);
  }
  /* Resultado estilizado */
  #result-text {
    font-size: 1.25rem;
    text-align: center;
    color: #ffdddd;
    text-shadow: 0 0 12px #bb0000;
  }
  /* Responsividade */
  @media (max-width: 480px) {
    .btn-group {
      flex-direction: column;
      gap: 15px;
    }
    button {
      flex-basis: 100%;
      font-size: 1.3rem;
      padding: 16px 0;
    }
    #grim-reaper {
      width: 90px;
      margin-bottom: 25px;
    }
  }
</style>
</head>
<body>
<audio id="ambient-sound" loop autoplay muted playsinline>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_00a3e8f6ef.mp3?filename=dark-fantasy-ambient-12586.mp3" type="audio/mpeg" />
  Seu navegador não suporta áudio.
</audio>
<div id="app" class="fade-slide">
  <!-- Tela Inicial -->
  <div id="screen-start" class="screen">
    <img id="grim-reaper" src="https://i.imgur.com/llOqHnL.png" alt="Figura da Morte com foice" />
    <h1>Descubra o Dia da Sua Morte</h1>
    <p style="text-align:center; font-size:1.1rem; margin-bottom:25px; color:#ff6666; text-shadow:0 0 8px #ff0000;">
      Será que você sabe quando vai morrer? Responda as perguntas e descubra seu destino final...
    </p>
    <button id="start-btn">Começar</button>
  </div>
  <!-- Perguntas -->
  <div id="screen-questions" class="screen" style="display:none;">
    <div id="question-container">
      <p class="question-text" id="question-text"></p>
      <div class="btn-group" id="answers"></div>
    </div>
  </div>
  <!-- Resultado -->
  <div id="screen-result" class="screen" style="display:none;">
    <img id="grim-reaper-result" src="https://i.imgur.com/llOqHnL.png" alt="Figura da Morte com foice" style="width: 130px; display:block; margin: 0 auto 30px auto; filter: drop-shadow(0 0 12px #bb0000);" />
    <h2>Seu Fim Está Marcado</h2>
    <p id="result-text"></p>
  </div>
</div>
<script>
(() => {
  const audio = document.getElementById('ambient-sound');
  audio.volume = 0.12; // Volume baixo (12%)
  audio.muted = false;

  const questions = [
    {
      text: "Você fuma?",
      answers: ["Sim", "Não", "Às vezes"]
    },
    {
      text: "Você pratica exercícios físicos regularmente?",
      answers: ["Sim", "Não", "Às vezes"]
    },
    {
      text: "Você já teve alguma doença grave (ex: diabetes, pressão alta)?",
      answers: ["Sim", "Não"]
    },
    {
      text: "Você consome bebidas alcoólicas?",
      answers: ["Sim", "Não", "Às vezes"]
    },
    {
      text: "Você tem histórico familiar de doenças cardíacas?",
      answers: ["Sim", "Não"]
    },
    {
      text: "Qual seu nome?",
      answers: null,
      inputType: "text",
      inputId: "nameInput",
      inputPlaceholder: "Digite seu nome aqui"
    },
    {
      text: "Qual sua data de nascimento?",
      answers: null,
      inputType: "date",
      inputId: "birthDateInput"
    }
  ];

  const deathCauses = [
    "parada cardíaca inesperada",
    "acidente de carro fatal",
    "infarto fulminante",
    "derrame cerebral",
    "complicações de uma doença crônica",
    "queda grave em casa",
    "ataque de apneia súbita",
    "choque anafilático",
    "envenenamento acidental",
    "susto extremo com parada cardíaca"
  ];

  const cities = ["Jaguaribe", "Jaguaribara", "Limoeiro", "Itaiçaba", "Aracati", "Morada Nova"];

  const startBtn = document.getElementById('start-btn');
  const screenStart = document.getElementById('screen-start');
  const screenQuestions = document.getElementById('screen-questions');
  const screenResult = document.getElementById('screen-result');
  const questionText = document.getElementById('question-text');
  const answersDiv = document.getElementById('answers');
  const resultText = document.getElementById('result-text');

  let currentQuestionIndex = 0;
  let userResponses = {};
  let userName = '';
  let userBirthDate = null;

  // Função para formatar data para dd/mm/yyyy
  function formatDateBR(date) {
    const d = new Date(date);
    let day = d.getDate();
    let month = d.getMonth() + 1;
    const year = d.getFullYear();
    if(day < 10) day = '0'+day;
    if(month < 10) month = '0'+month;
    return `${day}/${month}/${year}`;
  }

  function calculateDeathDay(birthDate) {
    const baseAge = Math.floor(60 + Math.random() * 30); // Morrer entre 60 e 90 anos
    const birth = new Date(birthDate);
    const deathYear = birth.getFullYear() + baseAge;
    const deathMonth = Math.floor(Math.random() * 12);
    const deathDay = Math.floor(Math.random() * 28) + 1; // Para evitar problemas com meses menores
    return new Date(deathYear, deathMonth, deathDay);
  }

  function renderQuestion() {
    questionText.textContent = questions[currentQuestionIndex].text;
    answersDiv.innerHTML = '';

    if(questions[currentQuestionIndex].answers) {
      // Mostrar botões com respostas
      const ans = questions[currentQuestionIndex].answers;
      ans.forEach((answer, i) => {
        const btn = document.createElement('button');
        btn.textContent = answer;
        btn.style.textAlign = i === 0 ? 'left' : (i === ans.length-1 ? 'right' : 'center');
        btn.addEventListener('click', () => {
          userResponses[questions[currentQuestionIndex].text] = answer;
          nextQuestion();
        });
        answersDiv.appendChild(btn);
      });
    } else if(questions[currentQuestionIndex].inputType === "text") {
      const input = document.createElement('input');
      input.type = "text";
      input.id = questions[currentQuestionIndex].inputId;
      input.placeholder = questions[currentQuestionIndex].inputPlaceholder;
      input.autocomplete = "off";
      input.required = true;
      answersDiv.appendChild(input);

      const btn = document.createElement('button');
      btn.textContent = "Próximo";
      btn.style.flexBasis = "100%";
      btn.addEventListener('click', () => {
        const val = input.value.trim();
        if(val === '') {
          alert('Por favor, preencha seu nome para continuar.');
          return;
        }
        userName = val;
        userResponses[questions[currentQuestionIndex].text] = val;
        nextQuestion();
      });
      answersDiv.appendChild(btn);
      input.focus();
    } else if(questions[currentQuestionIndex].inputType === "date") {
      const input = document.createElement('input');
      input.type = "date";
      input.id = questions[currentQuestionIndex].inputId;
      input.max = new Date().toISOString().split("T")[0]; // Data máxima hoje
      answersDiv.appendChild(input);

      const btn = document.createElement('button');
      btn.textContent = "Descubra o dia da sua morte";
      btn.style.flexBasis = "100%";
      btn.addEventListener('click', () => {
        const val = input.value;
        if(!val) {
          alert('Por favor, informe sua data de nascimento para continuar.');
          return;
        }
        userBirthDate = val;
        userResponses[questions[currentQuestionIndex].text] = val;
        showResult();
      });
      answersDiv.appendChild(btn);
      input.focus();
    }
  }

  function nextQuestion() {
    currentQuestionIndex++;
    if(currentQuestionIndex >= questions.length) {
      showResult();
    } else {
      renderQuestion();
    }
  }

  function showResult() {
    screenQuestions.style.display = 'none';
    screenStart.style.display = 'none';
    screenResult.style.display = 'block';

    // Calcula a data da morte
    const deathDate = calculateDeathDay(userBirthDate);
    const deathAge = deathDate.getFullYear() - new Date(userBirthDate).getFullYear();

    // Escolhe causa da morte aleatória
    const cause = deathCauses[Math.floor(Math.random() * deathCauses.length)];

    // Escolhe cidade aleatória
    const city = cities[Math.floor(Math.random() * cities.length)];

    resultText.innerHTML =
      `<strong>${userName}</strong>, seu fim acontecerá exatamente assim.<br>` +
      `Você terá <strong>${cause}</strong>.<br>` +
      `Data e hora da morte: <strong>${formatDateBR(deathDate)}</strong> às <strong>${String(Math.floor(Math.random()*24)).padStart(2,'0')}:${String(Math.floor(Math.random()*60)).padStart(2,'0')}</strong>.<br>` +
      `Você morrerá em <strong>${city}</strong>, com <strong>${deathAge} anos</strong> no ano de <strong>${deathDate.getFullYear()}</strong>.`;

    // Pausa som para foco no resultado (opcional)
    // audio.pause();
  }

  startBtn.addEventListener('click', () => {
    screenStart.style.display = 'none';
    screenQuestions.style.display = 'block';
    currentQuestionIndex = 0;
    userResponses = {};
    userName = '';
    userBirthDate = null;
    renderQuestion();
  });

})();
</script>
</body>
</html>
